<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>how_we_did_the_carousel</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href=".//assets/lake-superior-reserve-rgb-logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./assets/lake-superior-reserve-rgb-logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">St. Louis River Estuary</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-water-quality" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Water Quality</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-water-quality">    
        <li>
    <a class="dropdown-item" href="./water_quality.html">
 <span class="dropdown-text">Water Quality</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./temperature.html">
 <span class="dropdown-text">Temperature</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./conductivity.html">
 <span class="dropdown-text">Conductivity</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./dissolvedO2.html">
 <span class="dropdown-text">Dissolved Oxygen</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ph.html">
 <span class="dropdown-text">pH</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./turbidity.html">
 <span class="dropdown-text">Turbidity</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-weather" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Weather</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-weather">    
        <li>
    <a class="dropdown-item" href="./about.html">
 <span class="dropdown-text">About</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-nutrients" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Nutrients</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-nutrients">    
        <li>
    <a class="dropdown-item" href="./about.html">
 <span class="dropdown-text">About</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reports" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Reports</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-reports">    
        <li>
    <a class="dropdown-item" href="./reports.html">
 <span class="dropdown-text">Reports, Resources, &amp; Other Publications</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#how-we-did-the-carousel-feature" id="toc-how-we-did-the-carousel-feature" class="nav-link active" data-scroll-target="#how-we-did-the-carousel-feature">How we did the “carousel” feature…</a>
  <ul class="collapse">
  <li><a href="#the-goal" id="toc-the-goal" class="nav-link" data-scroll-target="#the-goal">The goal:</a></li>
  <li><a href="#the-problem" id="toc-the-problem" class="nav-link" data-scroll-target="#the-problem">The problem:</a></li>
  <li><a href="#the-one-that-should-have-worked-but-didnt" id="toc-the-one-that-should-have-worked-but-didnt" class="nav-link" data-scroll-target="#the-one-that-should-have-worked-but-didnt">The one that SHOULD have worked, but didn’t…</a></li>
  <li><a href="#the-one-that-did-work-enter-shiny-slickr" id="toc-the-one-that-did-work-enter-shiny-slickr" class="nav-link" data-scroll-target="#the-one-that-did-work-enter-shiny-slickr">The one that DID work; enter Shiny &amp; “slickR”</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="how-we-did-the-carousel-feature" class="level2">
<h2 class="anchored" data-anchor-id="how-we-did-the-carousel-feature">How we did the “carousel” feature…</h2>
<section id="the-goal" class="level3">
<h3 class="anchored" data-anchor-id="the-goal">The goal:</h3>
<p>For the “temperature” page, we wanted to have a BUNCH of figures to help communicate the different aspects of how temperature plays out at each of the four monitoring stations, and an image carousel seemed like an excellent way to make those images accessible, but without overloading the page with diagrams</p>
</section>
<section id="the-problem" class="level3">
<h3 class="anchored" data-anchor-id="the-problem">The problem:</h3>
<p>Image carousels as we normally think of them on modern websites are dynamic features, typically governed by JavaScript files, with a server operating unnoticed in the background. But we are looking to host this site via GitHub Pages, and that service can only handle static pages.</p>
</section>
<section id="the-one-that-should-have-worked-but-didnt" class="level3">
<h3 class="anchored" data-anchor-id="the-one-that-should-have-worked-but-didnt">The one that SHOULD have worked, but didn’t…</h3>
<p>In theory, you can make an image carousel using only HTML &amp; css code. The idea is that you use the HTML to create a container and a couple of anchored arrow-buttons, and then you use css to “style” that container with an image as the background. Then when the user clicks on the arrow/“link” the container is replaced with a different container that has a different image as its background. It is an interesting hack, but not terribly elegant, a royal pain to update…</p>
<p>…AND Quarto really hates this approach! Because the page is being built in markdown, and then converted to HTML automatically by Quarto, you don’t have a ton of control over how that HTML code gets written. And this approach requires precise control over the HTML. Long-story-short, Quarto kept injecting bugs that refused to die.</p>
<p>We used the following sites as reference if someone wants to try to tackle this later: - https://www.youtube.com/watch?v=F33_O-lcx20 - https://github.com/Himeld23/Pure-Css-Carousel</p>
</section>
<section id="the-one-that-did-work-enter-shiny-slickr" class="level3">
<h3 class="anchored" data-anchor-id="the-one-that-did-work-enter-shiny-slickr">The one that DID work; enter Shiny &amp; “slickR”</h3>
<p>The root of the solution was found here: - https://stackoverflow.com/questions/51531743/image-slideshow-in-r-shiny</p>
<p>The theory here is to: - Use R-Studio to build the carousel as a Shiny Web App. - That app is then “published” to an account on shinyapps.io, which results in a separate URL that is hosted on shinyapps.io. - This is brought into the Quarto markdown document using an <code>&lt;iframe&gt;</code> tag, which basically injects the external shinyapps.io website into the middle of the page. - This way the html page being hosted on GitHub Pages remains a “static” site, and the interactive, server-enabled behaviors are handled by the shinyapps.io site</p>
<p>Here is the code we used for the Shiny web app:</p>
<p>` library(shiny)<br>
library(slickR)</p>
<p>ui &lt;- fluidPage( slickROutput(“slickr”, width=“650px”) )</p>
<p>server &lt;- function(input, output) { output$slickr &lt;- renderSlickR({ imgs &lt;- list.files(“www”, pattern=“.jpg”, full.names = TRUE) slickR(imgs) }) }</p>
<p>shinyApp(ui = ui, server = server) <code>#### Notes on the images: - The images are placed in the "www" folder which needs to be in the same directory as the app.r file. That folder is not generated automatically - The carousel just cycles through the images based on their alphabetical ordering within the "WWW" folder. If you want to change the order of the images, you need to change their file-names. - For this application, we manually resized the images to 650 x 450 before they were placed into the "www" folder. - The size of the frame used to host the carousel should match or esceed the size of the images. See temperature.qmd to see how we coded our</code><iframe>` tags.</p>
<div id="quarto-navigation-envelope" class="hidden">
<p><span class="hidden" data-render-id="quarto-int-navbar-title">St. Louis River Estuary</span> <span class="hidden" data-render-id="quarto-int-navbar:Water Quality">Water Quality</span> <span class="hidden" data-render-id="quarto-int-navbar:Temperature">Temperature</span> <span class="hidden" data-render-id="quarto-int-navbar:Conductivity">Conductivity</span> <span class="hidden" data-render-id="quarto-int-navbar:Dissolved Oxygen">Dissolved Oxygen</span> <span class="hidden" data-render-id="quarto-int-navbar:pH">pH</span> <span class="hidden" data-render-id="quarto-int-navbar:Turbidity">Turbidity</span> <span class="hidden" data-render-id="quarto-int-navbar:Weather">Weather</span> <span class="hidden" data-render-id="quarto-int-navbar:About">About</span> <span class="hidden" data-render-id="quarto-int-navbar:Nutrients">Nutrients</span> <span class="hidden" data-render-id="quarto-int-navbar:Reports">Reports</span> <span class="hidden" data-render-id="quarto-int-navbar:Reports, Resources, &amp; Other Publications">Reports, Resources, &amp; Other Publications</span></p>
</div>
<div id="quarto-meta-markdown" class="hidden">
<p><span class="hidden" data-render-id="quarto-twittercardtitle"></span> <span class="hidden" data-render-id="quarto-ogcardtitle"></span></p>
</div>
</section>
</section>

</main> <!-- /main -->
<script id = "quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->

</body>

</html></iframe></p></section></section></main></div></body></html>